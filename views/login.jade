doctype html
html
    include ./includes/head.jade
    //- link(rel='stylesheet' type='text/css' href='/assets/custom/css/login.css')
    title Iniciar sesion 
    body(style='background-color: black;')
    .flex.flex-col.items-center.justify-center.px-6.py-8.mx-auto(class='md:h-screen lg:py-0')
        a.flex.items-center.mb-6.text-2xl.font-semibold.text-gray-900(href='#' class='dark:text-white')
            //- img.w-8.h-8.mr-2(src='/assets/img/capdam.ico' alt='logo')
            //- p.text-white
            //-     | SIGCAPDAM
        img(src='/assets/img/sigcapdam_clean.png' class='2xl:w-96 xl:w-72 l:w-72 md:w-72 sm:w-auto w-auto h-auto')
        .w-full.bg-white.rounded-lg.shadow(class='dark:border md:mt-0 sm:max-w-md xl:p-0 dark:bg-gray-800 dark:border-gray-700')
            .p-6.space-y-4(class='md:space-y-6 sm:p-8')
                h1.text-xl.font-bold.leading-tight.tracking-tight.text-gray-900.text-center(class='md:text-2xl dark:text-white')
                    | Iniciar sesión
                form.space-y-4(name='login-form' id='login-form' class='md:space-y-6' method='POST')
                    div
                        label.block.mb-2.text-sm.font-medium.text-gray-900(for='email' class='dark:text-white') Correo
                        input#email.bg-gray-50.border.border-gray-300.text-gray-900.rounded-lg.block.w-full(type='email' name='email' class='sm:text-sm focus:ring-primary-600 focus:border-primary-600 p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500' placeholder='name@company.com' required='')
                    div
                        label.block.mb-2.text-sm.font-medium.text-gray-900(for='password' class='dark:text-white') Contraseña
                        input#password.bg-gray-50.border.border-gray-300.text-gray-900.rounded-lg.block.w-full(type='password' name='password' placeholder='••••••••' class='sm:text-sm focus:ring-primary-600 focus:border-primary-600 p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500' required='')
                    .flex.items-center.justify-between
                        .flex.items-start
                            .flex.items-center.h-5
                                input#remember.w-4.h-4.border.border-gray-300.rounded.bg-gray-50(aria-describedby='remember' type='checkbox' class='focus:ring-3 focus:ring-primary-300 dark:bg-gray-700 dark:border-gray-600 dark:focus:ring-primary-600 dark:ring-offset-gray-800' required='')
                            .ml-3.text-sm
                                label.text-gray-500(for='remember' class='dark:text-gray-300') Mantener la sesión iniciada
                    button.w-full.text-white.bg-primary-600.font-medium.rounded-lg.text-sm.px-5.text-center(type='submit' class='hover:bg-primary-700 focus:ring-4 focus:outline-none focus:ring-primary-300 py-2.5 dark:bg-primary-600 dark:hover:bg-primary-700 dark:focus:ring-primary-800') Entrar
                    script.
                        document.addEventListener('DOMContentLoaded', function () {
                            const form = document.getElementById('login-form');

                            form.addEventListener('submit', async function (event) {
                                event.preventDefault();

                                const email = document.getElementById('email').value;
                                const password = document.getElementById('password').value;

                                // Make an Ajax POST request to your login route
                                const response = await fetch('/api/v1/auth/login', {
                                    method: 'POST',
                                    headers: {
                                        'Content-Type': 'application/json',
                                    },
                                    body: JSON.stringify({ email, password }),
                                });

                                const data = await response.json();

                                if (!data.success) {
                                    Swal.fire({
                                        icon: 'error',
                                        title: 'Error de credenciales',
                                        text: 'Credenciales incorrectas. Por favor, intenta de nuevo.',
                                    });
                                } else {
                                    // Handle successful login (redirect or other actions)
                                    window.location.href = '/layers2';
                                }
                            });
                        });

                include ./includes/footer.jade
